(this["webpackJsonpradio-archive"]=this["webpackJsonpradio-archive"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),s=n(18),i=n.n(s),o=n(20),l=n(8),u=n.n(l),j=n(10),d=n(6),b=n(2),h=n(9),O=function(){return Object(a.jsx)(c.Fragment,{children:Object(a.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(a.jsx)(h.b,{to:"/",children:Object(a.jsx)("h1",{children:"Radio Archive"})}),Object(a.jsx)("div",{className:"right menu",children:Object(a.jsx)("h3",{children:Object(a.jsx)(h.b,{to:"/login",children:"Admin"})})})]})})},m=function(e){var t=e.name,n=e.label,c=e.value,r=e.type,s=e.placeholder,i=e.onChange;return Object(a.jsxs)("div",{className:"field",children:[Object(a.jsx)("label",{htmlFor:"field-",children:n}),Object(a.jsx)("input",{id:"field-",name:t,type:r,value:c,onChange:i,placeholder:s})]})},x=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(d.a)(i,2),l=o[0],h=o[1],O=Object(c.useState)(""),x=Object(d.a)(O,2),p=x[0],f=x[1],v=Object(c.useState)(""),g=Object(d.a)(v,2),w=g[0],N=g[1],S=Object(c.useState)(""),k=Object(d.a)(S,2),C=k[0],y=k[1],D=Object(b.g)(),F=function(){var t=Object(j.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/api/shows/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:r,description:l,date:p,iframe:w,tags:C})});case 4:t.sent.ok?e.onAdd():console.log("Error when saving record"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:D.push("/"),window.location.reload(!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)(c.Fragment,{children:Object(a.jsxs)("form",{onSubmit:F,className:"ui form error",children:[Object(a.jsxs)("div",{className:"ui equal width form",children:[Object(a.jsxs)("div",{className:"fields",children:[Object(a.jsx)(m,{label:"Host Name",value:r,name:"host name",onChange:function(e){return s(e.target.value)}}),Object(a.jsx)(m,{label:"Description",value:l,name:"description",onChange:function(e){return h(e.target.value)}})]}),Object(a.jsxs)("div",{className:"fields",children:[Object(a.jsx)(m,{label:"Date",value:p,name:"Date",placeholder:"YYYY-MM-DD",onChange:function(e){return f(e.target.value)}}),Object(a.jsx)(m,{label:"Tags",value:C,name:"tag",onChange:function(e){return y(e.target.value)}}),Object(a.jsx)(m,{label:"File Link",value:w,name:"file link",placeholder:"Insert ONLY the link contained in the iframe embed from the Picture Widget",onChange:function(e){return N(e.target.value)}})]})]}),Object(a.jsx)("button",{className:"ui button",type:"submit",value:"Save",children:"Save"})]})})},p=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(d.a)(i,2),l=o[0],h=o[1],O=Object(c.useState)(""),x=Object(d.a)(O,2),p=x[0],f=x[1],v=Object(b.g)(),g=function(){var t=Object(j.a)(u.a.mark((function t(n){var a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.preventDefault(),t.next=4,fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:l})});case 4:return a=t.sent,console.log(a),t.next=8,a.json();case 8:if(c=t.sent,console.log(c),a.ok){t.next=12;break}throw new Error(c.message);case 12:e.getUser(),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0.message),f(t.t0.message);case 19:v.push("/upload");case 20:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)(c.Fragment,{children:Object(a.jsxs)("form",{onSubmit:g,className:"ui form error",children:[Object(a.jsx)(m,{label:"Email",required:!0,value:r,name:"Email Address",onChange:function(e){return s(e.target.value)}}),Object(a.jsx)(m,{name:"password",label:"Password",id:l,type:"password",required:!0,value:l,onChange:function(e){return h(e.target.value)}}),p&&Object(a.jsx)("div",{className:"ui error message",children:p}),Object(a.jsx)("button",{type:"submit",className:"ui submit button",children:"Sign In"})]})})},f=(n(32),function(e){var t=e.shows.slice().reverse();return Object(a.jsxs)("div",{className:"shows-archive",children:[Object(a.jsx)("h1",{children:"Past Shows:"}),Object(a.jsx)("div",{className:"container",children:t.map((function(e){var t=new Date(e.date);return Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"ui fluid card",children:[Object(a.jsx)("div",{className:"image",children:Object(a.jsx)("iframe",{width:"100%",height:"100%",title:e._id,src:e.iframe,frameBorder:"0"})}),Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)("div",{className:"header",children:e.host}),Object(a.jsx)("p",{style:{textTransform:"capitalize"},children:e.description}),Object(a.jsxs)("div",{className:"meta",children:[Object(a.jsx)("p",{children:t.toDateString()}),Object(a.jsx)("p",{children:e.tags})]})]})]})},e._id)}))})]})}),v=function(){return Object(a.jsx)("div",{className:"ui segment",children:Object(a.jsxs)("h5",{className:"ui center aligned header",children:["Created at ",Object(a.jsx)("a",{href:"https://junocollege.com/",children:"Juno College"})]})})};var g=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(void 0),i=Object(d.a)(s,2),l=i[0],h=i[1],m=Object(c.useCallback)(Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/shows/",{headers:{credentials:"include"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,t.ok){e.next=9;break}throw new Error(n.message);case 9:r(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r([]);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),g=Object(c.useCallback)(Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/me",{headers:{credentials:"include"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,t.ok){e.next=9;break}throw new Error(n.message);case 9:h(n.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(void 0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]);return Object(c.useEffect)((function(){m(),g()}),[m,g]),Object(a.jsxs)("div",{className:"ui container",children:[Object(a.jsx)(O,{}),Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:"/",component:function(){return Object(a.jsx)(f,{shows:n})}}),Object(a.jsx)(b.b,{path:"/login",render:function(e){return l?Object(a.jsx)(b.a,{to:"/upload"}):Object(a.jsx)(p,Object(o.a)({getUser:g},e))}}),Object(a.jsx)(b.b,{path:"/upload",component:x})]}),Object(a.jsx)(v,{})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(h.a,{children:Object(a.jsx)(g,{})})}),document.getElementById("root")),w()}},[[33,1,2]]]);
//# sourceMappingURL=main.5dad1e3e.chunk.js.map